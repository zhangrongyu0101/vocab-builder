var translators=function(t){"use strict";var e=Object.defineProperty,n=(t,n,r)=>(((t,n,r)=>{n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r})(t,"symbol"!=typeof n?n+"":n,r),r);function r(t,e){return function(){return t.apply(e,arguments)}}const{toString:s}=Object.prototype,{getPrototypeOf:a}=Object,o=(h=Object.create(null),t=>{const e=s.call(t);return h[e]||(h[e]=e.slice(8,-1).toLowerCase())}),i=t=>(t=t.toLowerCase(),e=>o(e)===t),l=t=>e=>typeof e===t,{isArray:c}=Array,u=l("undefined");var h;const d=i("ArrayBuffer");const p=l("string"),m=l("function"),f=l("number"),g=t=>null!==t&&"object"==typeof t,T=t=>{if("object"!==o(t))return!1;const e=a(t);return!(null!==e&&e!==Object.prototype&&null!==Object.getPrototypeOf(e)||Symbol.toStringTag in t||Symbol.iterator in t)},y=i("Date"),b=i("File"),A=i("Blob"),w=i("FileList"),R=i("URLSearchParams");function E(t,e,{allOwnKeys:n=!1}={}){if(null==t)return;let r,s;if("object"!=typeof t&&(t=[t]),c(t))for(r=0,s=t.length;r<s;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),a=s.length;let o;for(r=0;r<a;r++)o=s[r],e.call(null,t[o],o,t)}}function S(t,e){e=e.toLowerCase();const n=Object.keys(t);let r,s=n.length;for(;s-- >0;)if(r=n[s],e===r.toLowerCase())return r;return null}const O="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:global,k=t=>!u(t)&&t!==O;const _=(t=>e=>t&&e instanceof t)("undefined"!=typeof Uint8Array&&a(Uint8Array)),C=i("HTMLFormElement"),L=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),N=i("RegExp"),v=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};E(n,((n,s)=>{let a;!1!==(a=e(n,s,t))&&(r[s]=a||n)})),Object.defineProperties(t,r)},x="abcdefghijklmnopqrstuvwxyz",U="0123456789",P={DIGIT:U,ALPHA:x,ALPHA_DIGIT:x+x.toUpperCase()+U};const I=i("AsyncFunction");var D={isArray:c,isArrayBuffer:d,isBuffer:function(t){return null!==t&&!u(t)&&null!==t.constructor&&!u(t.constructor)&&m(t.constructor.isBuffer)&&t.constructor.isBuffer(t)},isFormData:t=>{let e;return t&&("function"==typeof FormData&&t instanceof FormData||m(t.append)&&("formdata"===(e=o(t))||"object"===e&&m(t.toString)&&"[object FormData]"===t.toString()))},isArrayBufferView:function(t){let e;return e="undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):t&&t.buffer&&d(t.buffer),e},isString:p,isNumber:f,isBoolean:t=>!0===t||!1===t,isObject:g,isPlainObject:T,isUndefined:u,isDate:y,isFile:b,isBlob:A,isRegExp:N,isFunction:m,isStream:t=>g(t)&&m(t.pipe),isURLSearchParams:R,isTypedArray:_,isFileList:w,forEach:E,merge:function t(){const{caseless:e}=k(this)&&this||{},n={},r=(r,s)=>{const a=e&&S(n,s)||s;T(n[a])&&T(r)?n[a]=t(n[a],r):T(r)?n[a]=t({},r):c(r)?n[a]=r.slice():n[a]=r};for(let s=0,a=arguments.length;s<a;s++)arguments[s]&&E(arguments[s],r);return n},extend:(t,e,n,{allOwnKeys:s}={})=>(E(e,((e,s)=>{n&&m(e)?t[s]=r(e,n):t[s]=e}),{allOwnKeys:s}),t),trim:t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,""),stripBOM:t=>(65279===t.charCodeAt(0)&&(t=t.slice(1)),t),inherits:(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},toFlatObject:(t,e,n,r)=>{let s,o,i;const l={};if(e=e||{},null==t)return e;do{for(s=Object.getOwnPropertyNames(t),o=s.length;o-- >0;)i=s[o],(!r||r(i,t,e))&&!l[i]&&(e[i]=t[i],l[i]=!0);t=!1!==n&&a(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},kindOf:o,kindOfTest:i,endsWith:(t,e,n)=>{t=String(t),(void 0===n||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return-1!==r&&r===n},toArray:t=>{if(!t)return null;if(c(t))return t;let e=t.length;if(!f(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},forEachEntry:(t,e)=>{const n=(t&&t[Symbol.iterator]).call(t);let r;for(;(r=n.next())&&!r.done;){const n=r.value;e.call(t,n[0],n[1])}},matchAll:(t,e)=>{let n;const r=[];for(;null!==(n=t.exec(e));)r.push(n);return r},isHTMLForm:C,hasOwnProperty:L,hasOwnProp:L,reduceDescriptors:v,freezeMethods:t=>{v(t,((e,n)=>{if(m(t)&&-1!==["arguments","caller","callee"].indexOf(n))return!1;const r=t[n];if(m(r)){if(e.enumerable=!1,"writable"in e)return void(e.writable=!1);e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}}))},toObjectSet:(t,e)=>{const n={},r=t=>{t.forEach((t=>{n[t]=!0}))};return c(t)?r(t):r(String(t).split(e)),n},toCamelCase:t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,(function(t,e,n){return e.toUpperCase()+n})),noop:()=>{},toFiniteNumber:(t,e)=>(t=+t,Number.isFinite(t)?t:e),findKey:S,global:O,isContextDefined:k,ALPHABET:P,generateString:(t=16,e=P.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n},isSpecCompliantForm:function(t){return!!(t&&m(t.append)&&"FormData"===t[Symbol.toStringTag]&&t[Symbol.iterator])},toJSONObject:t=>{const e=new Array(10),n=(t,r)=>{if(g(t)){if(e.indexOf(t)>=0)return;if(!("toJSON"in t)){e[r]=t;const s=c(t)?[]:{};return E(t,((t,e)=>{const a=n(t,r+1);!u(a)&&(s[e]=a)})),e[r]=void 0,s}}return t};return n(t,0)},isAsyncFn:I,isThenable:t=>t&&(g(t)||m(t))&&m(t.then)&&m(t.catch)};function M(t,e,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=(new Error).stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}D.inherits(M,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:D.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const j=M.prototype,F={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach((t=>{F[t]={value:t}})),Object.defineProperties(M,F),Object.defineProperty(j,"isAxiosError",{value:!0}),M.from=(t,e,n,r,s,a)=>{const o=Object.create(j);return D.toFlatObject(t,o,(function(t){return t!==Error.prototype}),(t=>"isAxiosError"!==t)),M.call(o,t.message,e,n,r,s),o.cause=t,o.name=t.name,a&&Object.assign(o,a),o};function B(t){return D.isPlainObject(t)||D.isArray(t)}function H(t){return D.endsWith(t,"[]")?t.slice(0,-2):t}function z(t,e,n){return t?t.concat(e).map((function(t,e){return t=H(t),!n&&e?"["+t+"]":t})).join(n?".":""):e}const $=D.toFlatObject(D,{},null,(function(t){return/^is[A-Z]/.test(t)}));function q(t,e,n){if(!D.isObject(t))throw new TypeError("target must be an object");e=e||new FormData;const r=(n=D.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,(function(t,e){return!D.isUndefined(e[t])}))).metaTokens,s=n.visitor||c,a=n.dots,o=n.indexes,i=(n.Blob||"undefined"!=typeof Blob&&Blob)&&D.isSpecCompliantForm(e);if(!D.isFunction(s))throw new TypeError("visitor must be a function");function l(t){if(null===t)return"";if(D.isDate(t))return t.toISOString();if(!i&&D.isBlob(t))throw new M("Blob is not supported. Use a Buffer instead.");return D.isArrayBuffer(t)||D.isTypedArray(t)?i&&"function"==typeof Blob?new Blob([t]):Buffer.from(t):t}function c(t,n,s){let i=t;if(t&&!s&&"object"==typeof t)if(D.endsWith(n,"{}"))n=r?n:n.slice(0,-2),t=JSON.stringify(t);else if(D.isArray(t)&&function(t){return D.isArray(t)&&!t.some(B)}(t)||(D.isFileList(t)||D.endsWith(n,"[]"))&&(i=D.toArray(t)))return n=H(n),i.forEach((function(t,r){!D.isUndefined(t)&&null!==t&&e.append(!0===o?z([n],r,a):null===o?n:n+"[]",l(t))})),!1;return!!B(t)||(e.append(z(s,n,a),l(t)),!1)}const u=[],h=Object.assign($,{defaultVisitor:c,convertValue:l,isVisitable:B});if(!D.isObject(t))throw new TypeError("data must be an object");return function t(n,r){if(!D.isUndefined(n)){if(-1!==u.indexOf(n))throw Error("Circular reference detected in "+r.join("."));u.push(n),D.forEach(n,(function(n,a){!0===(!(D.isUndefined(n)||null===n)&&s.call(e,n,D.isString(a)?a.trim():a,r,h))&&t(n,r?r.concat(a):[a])})),u.pop()}}(t),e}function K(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,(function(t){return e[t]}))}function G(t,e){this._pairs=[],t&&q(t,this,e)}const J=G.prototype;function W(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function V(t,e,n){if(!e)return t;const r=n&&n.encode||W,s=n&&n.serialize;let a;if(a=s?s(e,n):D.isURLSearchParams(e)?e.toString():new G(e,n).toString(r),a){const e=t.indexOf("#");-1!==e&&(t=t.slice(0,e)),t+=(-1===t.indexOf("?")?"?":"&")+a}return t}J.append=function(t,e){this._pairs.push([t,e])},J.toString=function(t){const e=t?function(e){return t.call(this,e,K)}:K;return this._pairs.map((function(t){return e(t[0])+"="+e(t[1])}),"").join("&")};var X=class{constructor(){this.handlers=[]}use(t,e,n){return this.handlers.push({fulfilled:t,rejected:e,synchronous:!!n&&n.synchronous,runWhen:n?n.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){D.forEach(this.handlers,(function(e){null!==e&&t(e)}))}},Y={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Z={isBrowser:!0,classes:{URLSearchParams:"undefined"!=typeof URLSearchParams?URLSearchParams:G,FormData:"undefined"!=typeof FormData?FormData:null,Blob:"undefined"!=typeof Blob?Blob:null},protocols:["http","https","file","blob","url","data"]};const Q="undefined"!=typeof window&&"undefined"!=typeof document,tt=(t=>Q&&["ReactNative","NativeScript","NS"].indexOf(t)<0)("undefined"!=typeof navigator&&navigator.product),et="undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"function"==typeof self.importScripts;var nt={...Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Q,hasStandardBrowserWebWorkerEnv:et,hasStandardBrowserEnv:tt},Symbol.toStringTag,{value:"Module"})),...Z};function rt(t){function e(t,n,r,s){let a=t[s++];if("__proto__"===a)return!0;const o=Number.isFinite(+a),i=s>=t.length;return a=!a&&D.isArray(r)?r.length:a,i?(D.hasOwnProp(r,a)?r[a]=[r[a],n]:r[a]=n,!o):((!r[a]||!D.isObject(r[a]))&&(r[a]=[]),e(t,n,r[a],s)&&D.isArray(r[a])&&(r[a]=function(t){const e={},n=Object.keys(t);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],e[a]=t[a];return e}(r[a])),!o)}if(D.isFormData(t)&&D.isFunction(t.entries)){const n={};return D.forEachEntry(t,((t,r)=>{e(function(t){return D.matchAll(/\w+|\[(\w*)]/g,t).map((t=>"[]"===t[0]?"":t[1]||t[0]))}(t),r,n,0)})),n}return null}const st={transitional:Y,adapter:["xhr","http"],transformRequest:[function(t,e){const n=e.getContentType()||"",r=n.indexOf("application/json")>-1,s=D.isObject(t);if(s&&D.isHTMLForm(t)&&(t=new FormData(t)),D.isFormData(t))return r?JSON.stringify(rt(t)):t;if(D.isArrayBuffer(t)||D.isBuffer(t)||D.isStream(t)||D.isFile(t)||D.isBlob(t))return t;if(D.isArrayBufferView(t))return t.buffer;if(D.isURLSearchParams(t))return e.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return function(t,e){return q(t,new nt.classes.URLSearchParams,Object.assign({visitor:function(t,e,n,r){return nt.isNode&&D.isBuffer(t)?(this.append(e,t.toString("base64")),!1):r.defaultVisitor.apply(this,arguments)}},e))}(t,this.formSerializer).toString();if((a=D.isFileList(t))||n.indexOf("multipart/form-data")>-1){const e=this.env&&this.env.FormData;return q(a?{"files[]":t}:t,e&&new e,this.formSerializer)}}return s||r?(e.setContentType("application/json",!1),function(t,e,r){if(D.isString(t))try{return(e||JSON.parse)(t),D.trim(t)}catch(n){if("SyntaxError"!==n.name)throw n}return(r||JSON.stringify)(t)}(t)):t}],transformResponse:[function(t){const e=this.transitional||st.transitional,n=e&&e.forcedJSONParsing,r="json"===this.responseType;if(t&&D.isString(t)&&(n&&!this.responseType||r)){const n=!(e&&e.silentJSONParsing)&&r;try{return JSON.parse(t)}catch(s){if(n)throw"SyntaxError"===s.name?M.from(s,M.ERR_BAD_RESPONSE,this,null,this.response):s}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:nt.classes.FormData,Blob:nt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};D.forEach(["delete","get","head","post","put","patch"],(t=>{st.headers[t]={}}));var at=st;const ot=D.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]);const it=Symbol("internals");function lt(t){return t&&String(t).trim().toLowerCase()}function ct(t){return!1===t||null==t?t:D.isArray(t)?t.map(ct):String(t)}function ut(t,e,n,r,s){if(D.isFunction(r))return r.call(this,e,n);if(s&&(e=n),D.isString(e)){if(D.isString(r))return-1!==e.indexOf(r);if(D.isRegExp(r))return r.test(e)}}class ht{constructor(t){t&&this.set(t)}set(t,e,n){const r=this;function s(t,e,n){const s=lt(e);if(!s)throw new Error("header name must be a non-empty string");const a=D.findKey(r,s);(!a||void 0===r[a]||!0===n||void 0===n&&!1!==r[a])&&(r[a||e]=ct(t))}const a=(t,e)=>D.forEach(t,((t,n)=>s(t,n,e)));return D.isPlainObject(t)||t instanceof this.constructor?a(t,e):D.isString(t)&&(t=t.trim())&&!(t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim()))(t)?a((t=>{const e={};let n,r,s;return t&&t.split("\n").forEach((function(t){s=t.indexOf(":"),n=t.substring(0,s).trim().toLowerCase(),r=t.substring(s+1).trim(),!(!n||e[n]&&ot[n])&&("set-cookie"===n?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)})),e})(t),e):null!=t&&s(e,t,n),this}get(t,e){if(t=lt(t)){const n=D.findKey(this,t);if(n){const t=this[n];if(!e)return t;if(!0===e)return function(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}(t);if(D.isFunction(e))return e.call(this,t,n);if(D.isRegExp(e))return e.exec(t);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,e){if(t=lt(t)){const n=D.findKey(this,t);return!(!n||void 0===this[n]||e&&!ut(0,this[n],n,e))}return!1}delete(t,e){const n=this;let r=!1;function s(t){if(t=lt(t)){const s=D.findKey(n,t);s&&(!e||ut(0,n[s],s,e))&&(delete n[s],r=!0)}}return D.isArray(t)?t.forEach(s):s(t),r}clear(t){const e=Object.keys(this);let n=e.length,r=!1;for(;n--;){const s=e[n];(!t||ut(0,this[s],s,t,!0))&&(delete this[s],r=!0)}return r}normalize(t){const e=this,n={};return D.forEach(this,((r,s)=>{const a=D.findKey(n,s);if(a)return e[a]=ct(r),void delete e[s];const o=t?function(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,((t,e,n)=>e.toUpperCase()+n))}(s):String(s).trim();o!==s&&delete e[s],e[o]=ct(r),n[o]=!0})),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const e=Object.create(null);return D.forEach(this,((n,r)=>{null!=n&&!1!==n&&(e[r]=t&&D.isArray(n)?n.join(", "):n)})),e}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map((([t,e])=>t+": "+e)).join("\n")}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...e){const n=new this(t);return e.forEach((t=>n.set(t))),n}static accessor(t){const e=(this[it]=this[it]={accessors:{}}).accessors,n=this.prototype;function r(t){const r=lt(t);e[r]||(function(t,e){const n=D.toCamelCase(" "+e);["get","set","has"].forEach((r=>{Object.defineProperty(t,r+n,{value:function(t,n,s){return this[r].call(this,e,t,n,s)},configurable:!0})}))}(n,t),e[r]=!0)}return D.isArray(t)?t.forEach(r):r(t),this}}ht.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]),D.reduceDescriptors(ht.prototype,(({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(t){this[n]=t}}})),D.freezeMethods(ht);var dt=ht;function pt(t,e){const n=this||at,r=e||n,s=dt.from(r.headers);let a=r.data;return D.forEach(t,(function(t){a=t.call(n,a,s.normalize(),e?e.status:void 0)})),s.normalize(),a}function mt(t){return!(!t||!t.__CANCEL__)}function ft(t,e,n){M.call(this,null==t?"canceled":t,M.ERR_CANCELED,e,n),this.name="CanceledError"}D.inherits(ft,M,{__CANCEL__:!0});var gt=nt.hasStandardBrowserEnv?{write(t,e,n,r,s,a){const o=[t+"="+encodeURIComponent(e)];D.isNumber(n)&&o.push("expires="+new Date(n).toGMTString()),D.isString(r)&&o.push("path="+r),D.isString(s)&&o.push("domain="+s),!0===a&&o.push("secure"),document.cookie=o.join("; ")},read(t){const e=document.cookie.match(new RegExp("(^|;\\s*)("+t+")=([^;]*)"));return e?decodeURIComponent(e[3]):null},remove(t){this.write(t,"",Date.now()-864e5)}}:{write(){},read:()=>null,remove(){}};function Tt(t,e){return t&&!function(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}(e)?function(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}(t,e):e}var yt=nt.hasStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),e=document.createElement("a");let n;function r(n){let r=n;return t&&(e.setAttribute("href",r),r=e.href),e.setAttribute("href",r),{href:e.href,protocol:e.protocol?e.protocol.replace(/:$/,""):"",host:e.host,search:e.search?e.search.replace(/^\?/,""):"",hash:e.hash?e.hash.replace(/^#/,""):"",hostname:e.hostname,port:e.port,pathname:"/"===e.pathname.charAt(0)?e.pathname:"/"+e.pathname}}return n=r(window.location.href),function(t){const e=D.isString(t)?r(t):t;return e.protocol===n.protocol&&e.host===n.host}}():function(){return!0};function bt(t,e){let n=0;const r=function(t,e){t=t||10;const n=new Array(t),r=new Array(t);let s,a=0,o=0;return e=void 0!==e?e:1e3,function(i){const l=Date.now(),c=r[o];s||(s=l),n[a]=i,r[a]=l;let u=o,h=0;for(;u!==a;)h+=n[u++],u%=t;if(a=(a+1)%t,a===o&&(o=(o+1)%t),l-s<e)return;const d=c&&l-c;return d?Math.round(1e3*h/d):void 0}}(50,250);return s=>{const a=s.loaded,o=s.lengthComputable?s.total:void 0,i=a-n,l=r(i);n=a;const c={loaded:a,total:o,progress:o?a/o:void 0,bytes:i,rate:l||void 0,estimated:l&&o&&a<=o?(o-a)/l:void 0,event:s};c[e?"download":"upload"]=!0,t(c)}}var At="undefined"!=typeof XMLHttpRequest&&function(t){return new Promise((function(e,n){let r=t.data;const s=dt.from(t.headers).normalize();let a,o,{responseType:i,withXSRFToken:l}=t;function c(){t.cancelToken&&t.cancelToken.unsubscribe(a),t.signal&&t.signal.removeEventListener("abort",a)}if(D.isFormData(r))if(nt.hasStandardBrowserEnv||nt.hasStandardBrowserWebWorkerEnv)s.setContentType(!1);else if(!1!==(o=s.getContentType())){const[t,...e]=o?o.split(";").map((t=>t.trim())).filter(Boolean):[];s.setContentType([t||"multipart/form-data",...e].join("; "))}let u=new XMLHttpRequest;if(t.auth){const e=t.auth.username||"",n=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(e+":"+n))}const h=Tt(t.baseURL,t.url);function d(){if(!u)return;const r=dt.from("getAllResponseHeaders"in u&&u.getAllResponseHeaders());(function(t,e,n){const r=n.config.validateStatus;n.status&&r&&!r(n.status)?e(new M("Request failed with status code "+n.status,[M.ERR_BAD_REQUEST,M.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n)):t(n)})((function(t){e(t),c()}),(function(t){n(t),c()}),{data:i&&"text"!==i&&"json"!==i?u.response:u.responseText,status:u.status,statusText:u.statusText,headers:r,config:t,request:u}),u=null}if(u.open(t.method.toUpperCase(),V(h,t.params,t.paramsSerializer),!0),u.timeout=t.timeout,"onloadend"in u?u.onloadend=d:u.onreadystatechange=function(){!u||4!==u.readyState||0===u.status&&(!u.responseURL||0!==u.responseURL.indexOf("file:"))||setTimeout(d)},u.onabort=function(){!u||(n(new M("Request aborted",M.ECONNABORTED,t,u)),u=null)},u.onerror=function(){n(new M("Network Error",M.ERR_NETWORK,t,u)),u=null},u.ontimeout=function(){let e=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const r=t.transitional||Y;t.timeoutErrorMessage&&(e=t.timeoutErrorMessage),n(new M(e,r.clarifyTimeoutError?M.ETIMEDOUT:M.ECONNABORTED,t,u)),u=null},nt.hasStandardBrowserEnv&&(l&&D.isFunction(l)&&(l=l(t)),l||!1!==l&&yt(h))){const e=t.xsrfHeaderName&&t.xsrfCookieName&&gt.read(t.xsrfCookieName);e&&s.set(t.xsrfHeaderName,e)}void 0===r&&s.setContentType(null),"setRequestHeader"in u&&D.forEach(s.toJSON(),(function(t,e){u.setRequestHeader(e,t)})),D.isUndefined(t.withCredentials)||(u.withCredentials=!!t.withCredentials),i&&"json"!==i&&(u.responseType=t.responseType),"function"==typeof t.onDownloadProgress&&u.addEventListener("progress",bt(t.onDownloadProgress,!0)),"function"==typeof t.onUploadProgress&&u.upload&&u.upload.addEventListener("progress",bt(t.onUploadProgress)),(t.cancelToken||t.signal)&&(a=e=>{!u||(n(!e||e.type?new ft(null,t,u):e),u.abort(),u=null)},t.cancelToken&&t.cancelToken.subscribe(a),t.signal&&(t.signal.aborted?a():t.signal.addEventListener("abort",a)));const p=function(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}(h);p&&-1===nt.protocols.indexOf(p)?n(new M("Unsupported protocol "+p+":",M.ERR_BAD_REQUEST,t)):u.send(r||null)}))};const wt={http:null,xhr:At};D.forEach(wt,((t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}}));const Rt=t=>`- ${t}`,Et=t=>D.isFunction(t)||null===t||!1===t;var St=t=>{t=D.isArray(t)?t:[t];const{length:e}=t;let n,r;const s={};for(let a=0;a<e;a++){let e;if(n=t[a],r=n,!Et(n)&&(r=wt[(e=String(n)).toLowerCase()],void 0===r))throw new M(`Unknown adapter '${e}'`);if(r)break;s[e||"#"+a]=r}if(!r){const t=Object.entries(s).map((([t,e])=>`adapter ${t} `+(!1===e?"is not supported by the environment":"is not available in the build")));throw new M("There is no suitable adapter to dispatch the request "+(e?t.length>1?"since :\n"+t.map(Rt).join("\n"):" "+Rt(t[0]):"as no adapter specified"),"ERR_NOT_SUPPORT")}return r};function Ot(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new ft(null,t)}function kt(t){return Ot(t),t.headers=dt.from(t.headers),t.data=pt.call(t,t.transformRequest),-1!==["post","put","patch"].indexOf(t.method)&&t.headers.setContentType("application/x-www-form-urlencoded",!1),St(t.adapter||at.adapter)(t).then((function(e){return Ot(t),e.data=pt.call(t,t.transformResponse,e),e.headers=dt.from(e.headers),e}),(function(e){return mt(e)||(Ot(t),e&&e.response&&(e.response.data=pt.call(t,t.transformResponse,e.response),e.response.headers=dt.from(e.response.headers))),Promise.reject(e)}))}const _t=t=>t instanceof dt?{...t}:t;function Ct(t,e){e=e||{};const n={};function r(t,e,n){return D.isPlainObject(t)&&D.isPlainObject(e)?D.merge.call({caseless:n},t,e):D.isPlainObject(e)?D.merge({},e):D.isArray(e)?e.slice():e}function s(t,e,n){return D.isUndefined(e)?D.isUndefined(t)?void 0:r(void 0,t,n):r(t,e,n)}function a(t,e){if(!D.isUndefined(e))return r(void 0,e)}function o(t,e){return D.isUndefined(e)?D.isUndefined(t)?void 0:r(void 0,t):r(void 0,e)}function i(n,s,a){return a in e?r(n,s):a in t?r(void 0,n):void 0}const l={url:a,method:a,data:a,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:i,headers:(t,e)=>s(_t(t),_t(e),!0)};return D.forEach(Object.keys(Object.assign({},t,e)),(function(r){const a=l[r]||s,o=a(t[r],e[r],r);D.isUndefined(o)&&a!==i||(n[r]=o)})),n}const Lt="1.6.8",Nt={};["object","boolean","number","function","string","symbol"].forEach(((t,e)=>{Nt[t]=function(n){return typeof n===t||"a"+(e<1?"n ":" ")+t}}));const vt={};Nt.transitional=function(t,e,n){function r(t,e){return"[Axios v1.6.8] Transitional option '"+t+"'"+e+(n?". "+n:"")}return(n,s,a)=>{if(!1===t)throw new M(r(s," has been removed"+(e?" in "+e:"")),M.ERR_DEPRECATED);return e&&!vt[s]&&(vt[s]=!0,console.warn(r(s," has been deprecated since v"+e+" and will be removed in the near future"))),!t||t(n,s,a)}};var xt={assertOptions:function(t,e,n){if("object"!=typeof t)throw new M("options must be an object",M.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let s=r.length;for(;s-- >0;){const a=r[s],o=e[a];if(o){const e=t[a],n=void 0===e||o(e,a,t);if(!0!==n)throw new M("option "+a+" must be "+n,M.ERR_BAD_OPTION_VALUE)}else if(!0!==n)throw new M("Unknown option "+a,M.ERR_BAD_OPTION)}},validators:Nt};const Ut=xt.validators;class Pt{constructor(t){this.defaults=t,this.interceptors={request:new X,response:new X}}async request(t,e){try{return await this._request(t,e)}catch(n){if(n instanceof Error){let t;Error.captureStackTrace?Error.captureStackTrace(t={}):t=new Error;const e=t.stack?t.stack.replace(/^.+\n/,""):"";n.stack?e&&!String(n.stack).endsWith(e.replace(/^.+\n.+\n/,""))&&(n.stack+="\n"+e):n.stack=e}throw n}}_request(t,e){"string"==typeof t?(e=e||{}).url=t:e=t||{},e=Ct(this.defaults,e);const{transitional:n,paramsSerializer:r,headers:s}=e;void 0!==n&&xt.assertOptions(n,{silentJSONParsing:Ut.transitional(Ut.boolean),forcedJSONParsing:Ut.transitional(Ut.boolean),clarifyTimeoutError:Ut.transitional(Ut.boolean)},!1),null!=r&&(D.isFunction(r)?e.paramsSerializer={serialize:r}:xt.assertOptions(r,{encode:Ut.function,serialize:Ut.function},!0)),e.method=(e.method||this.defaults.method||"get").toLowerCase();let a=s&&D.merge(s.common,s[e.method]);s&&D.forEach(["delete","get","head","post","put","patch","common"],(t=>{delete s[t]})),e.headers=dt.concat(a,s);const o=[];let i=!0;this.interceptors.request.forEach((function(t){"function"==typeof t.runWhen&&!1===t.runWhen(e)||(i=i&&t.synchronous,o.unshift(t.fulfilled,t.rejected))}));const l=[];this.interceptors.response.forEach((function(t){l.push(t.fulfilled,t.rejected)}));let c,u,h=0;if(!i){const t=[kt.bind(this),void 0];for(t.unshift.apply(t,o),t.push.apply(t,l),u=t.length,c=Promise.resolve(e);h<u;)c=c.then(t[h++],t[h++]);return c}u=o.length;let d=e;for(h=0;h<u;){const t=o[h++],e=o[h++];try{d=t(d)}catch(p){e.call(this,p);break}}try{c=kt.call(this,d)}catch(m){return Promise.reject(m)}for(h=0,u=l.length;h<u;)c=c.then(l[h++],l[h++]);return c}getUri(t){return V(Tt((t=Ct(this.defaults,t)).baseURL,t.url),t.params,t.paramsSerializer)}}D.forEach(["delete","get","head","options"],(function(t){Pt.prototype[t]=function(e,n){return this.request(Ct(n||{},{method:t,url:e,data:(n||{}).data}))}})),D.forEach(["post","put","patch"],(function(t){function e(e){return function(n,r,s){return this.request(Ct(s||{},{method:t,headers:e?{"Content-Type":"multipart/form-data"}:{},url:n,data:r}))}}Pt.prototype[t]=e(),Pt.prototype[t+"Form"]=e(!0)}));var It=Pt;class Dt{constructor(t){if("function"!=typeof t)throw new TypeError("executor must be a function.");let e;this.promise=new Promise((function(t){e=t}));const n=this;this.promise.then((t=>{if(!n._listeners)return;let e=n._listeners.length;for(;e-- >0;)n._listeners[e](t);n._listeners=null})),this.promise.then=t=>{let e;const r=new Promise((t=>{n.subscribe(t),e=t})).then(t);return r.cancel=function(){n.unsubscribe(e)},r},t((function(t,r,s){n.reason||(n.reason=new ft(t,r,s),e(n.reason))}))}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){this.reason?t(this.reason):this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const e=this._listeners.indexOf(t);-1!==e&&this._listeners.splice(e,1)}static source(){let t;return{token:new Dt((function(e){t=e})),cancel:t}}}var Mt=Dt;const jt={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jt).forEach((([t,e])=>{jt[e]=t}));var Ft=jt;const Bt=function t(e){const n=new It(e),s=r(It.prototype.request,n);return D.extend(s,It.prototype,n,{allOwnKeys:!0}),D.extend(s,n,null,{allOwnKeys:!0}),s.create=function(n){return t(Ct(e,n))},s}(at);Bt.Axios=It,Bt.CanceledError=ft,Bt.CancelToken=Mt,Bt.isCancel=mt,Bt.VERSION=Lt,Bt.toFormData=q,Bt.AxiosError=M,Bt.Cancel=Bt.CanceledError,Bt.all=function(t){return Promise.all(t)},Bt.spread=function(t){return function(e){return t.apply(null,e)}},Bt.isAxiosError=function(t){return D.isObject(t)&&!0===t.isAxiosError},Bt.mergeConfig=Ct,Bt.AxiosHeaders=dt,Bt.formToJSON=t=>rt(D.isHTMLForm(t)?new FormData(t):t),Bt.getAdapter=St,Bt.HttpStatusCode=Ft,Bt.default=Bt;const Ht=new Proxy(Bt,{apply:async function(t,e,n){try{return await t(...n)}catch(r){throw{errorType:"NET_ERR",errorCode:0,errorMsg:r.message}}},get:function(t,e){const n=t[e];return"[object Function]"!==Object.prototype.toString.call(n)?n:async(...t)=>{try{return await Promise.resolve(n(...t))}catch(e){throw{errorType:"NET_ERR",errorCode:0,errorMsg:e.message}}}}}),zt=[["auto","auto-detect"],["ar","ar"],["ga","ga"],["et","et"],["or","or"],["bg","bg"],["is","is"],["pl","pl"],["bs","bs-Latn"],["fa","fa"],["prs","prs"],["da","da"],["de","de"],["ru","ru"],["fr","fr"],["zh-TW","zh-Hant"],["fil","fil"],["fj","fj"],["fi","fi"],["gu","gu"],["kk","kk"],["ht","ht"],["ko","ko"],["nl","nl"],["ca","ca"],["zh-CN","zh-Hans"],["cs","cs"],["kn","kn"],["otq","otq"],["tlh","tlh"],["hr","hr"],["lv","lv"],["lt","lt"],["ro","ro"],["mg","mg"],["mt","mt"],["mr","mr"],["ml","ml"],["ms","ms"],["mi","mi"],["bn","bn-BD"],["hmn","mww"],["af","af"],["pa","pa"],["pt","pt"],["ps","ps"],["ja","ja"],["sv","sv"],["sm","sm"],["sr-Latn","sr-Latn"],["sr-Cyrl","sr-Cyrl"],["no","nb"],["sk","sk"],["sl","sl"],["sw","sw"],["ty","ty"],["te","te"],["ta","ta"],["th","th"],["to","to"],["tr","tr"],["cy","cy"],["ur","ur"],["uk","uk"],["es","es"],["he","iw"],["el","el"],["hu","hu"],["it","it"],["hi","hi"],["id","id"],["en","en"],["yua","yua"],["yue","yua"],["vi","vi"],["ku","ku"],["kmr","kmr"]],$t={ar:["ar-SA","Male","ar-SA-Naayf"],bg:["bg-BG","Male","bg-BG-Ivan"],ca:["ca-ES","Female","ca-ES-HerenaRUS"],cs:["cs-CZ","Male","cs-CZ-Jakub"],da:["da-DK","Female","da-DK-HelleRUS"],de:["de-DE","Female","de-DE-Hedda"],el:["el-GR","Male","el-GR-Stefanos"],en:["en-US","Female","en-US-JessaRUS"],es:["es-ES","Female","es-ES-Laura-Apollo"],fi:["fi-FI","Female","fi-FI-HeidiRUS"],fr:["fr-FR","Female","fr-FR-Julie-Apollo"],he:["he-IL","Male","he-IL-Asaf"],hi:["hi-IN","Female","hi-IN-Kalpana-Apollo"],hr:["hr-HR","Male","hr-HR-Matej"],hu:["hu-HU","Male","hu-HU-Szabolcs"],id:["id-ID","Male","id-ID-Andika"],it:["it-IT","Male","it-IT-Cosimo-Apollo"],ja:["ja-JP","Female","ja-JP-Ayumi-Apollo"],ko:["ko-KR","Female","ko-KR-HeamiRUS"],ms:["ms-MY","Male","ms-MY-Rizwan"],nl:["nl-NL","Female","nl-NL-HannaRUS"],nb:["nb-NO","Female","nb-NO-HuldaRUS"],no:["nb-NO","Female","nb-NO-HuldaRUS"],pl:["pl-PL","Female","pl-PL-PaulinaRUS"],pt:["pt-PT","Female","pt-PT-HeliaRUS"],ro:["ro-RO","Male","ro-RO-Andrei"],ru:["ru-RU","Female","ru-RU-Irina-Apollo"],sk:["sk-SK","Male","sk-SK-Filip"],sl:["sl-SL","Male","sl-SI-Lado"],sv:["sv-SE","Female","sv-SE-HedvigRUS"],ta:["ta-IN","Female","ta-IN-Valluvar"],te:["te-IN","Male","te-IN-Chitra"],th:["th-TH","Male","th-TH-Pattara"],tr:["tr-TR","Female","tr-TR-SedaRUS"],vi:["vi-VN","Male","vi-VN-An"],"zh-Hans":["zh-CN","Female","zh-CN-HuihuiRUS"],"zh-Hant":["zh-CN","Female","zh-CN-HuihuiRUS"],yue:["zh-HK","Female","zh-HK-TracyRUS"]},qt={ar:"ar-EG",ca:"ca-ES",da:"da-DK",de:"de-DE",en:"en-US",es:"es-ES",fi:"fi-FI",fr:"fr-FR",hi:"hi-IN",it:"it-IT",ja:"ja-JP",ko:"ko-KR",nb:"nb-NO",nl:"nl-NL",pl:"pl-PL",pt:"pt-PT",ru:"ru-RU",sv:"sv-SE",th:"th-TH","zh-Hans":"zh-CN","zh-Hant":"zh-HK",yue:"zh-HK",gu:"gu-IN",mr:"mr-IN",ta:"ta-IN",te:"te-IN",tr:"tr-TR"};class Kt{constructor(){n(this,"IG",""),n(this,"IID",""),n(this,"token",""),n(this,"key",""),n(this,"tokensInitiated",!1),n(this,"TTS_AUTH",{region:"",token:""}),n(this,"count",0),n(this,"HTMLParser",new DOMParser),n(this,"MAX_RETRY",1),n(this,"HOST","https://cn.bing.com/"),n(this,"HOME_PAGE","https://cn.bing.com/translator"),n(this,"HEADERS",{accept:"*/*","accept-language":"zh-CN,zh-TW;q=0.9,zh;q=0.8,en;q=0.7","content-type":"application/x-www-form-urlencoded"}),n(this,"LAN_TO_CODE",new Map(zt)),n(this,"CODE_TO_LAN",new Map(zt.map((([t,e])=>[e,t])))),n(this,"AUDIO",new Audio)}async updateTokens(){const t=await Ht.get(this.HOME_PAGE),e=/(https:\/\/.*\.bing\.com\/).*/g.exec(t.request.responseURL);e&&e[1]!=this.HOST&&(this.HOST=e[1],this.HOME_PAGE=`${this.HOST}translator`),this.IG=t.data.match(/IG:"([A-Za-z0-9]+)"/)[1],[,this.key,this.token]=t.data.match(/var params_AbusePreventionHelper\s*=\s*\[([0-9]+),\s*"([^"]+)",[^\]]*\];/);const n=this.HTMLParser.parseFromString(t.data,"text/html");this.IID=n.getElementById("rich_tta").getAttribute("data-iid")||"",this.count=0}parseTranslateResult(t,e){const n=e||new Object;try{const e=t[0].translations;n.mainMeaning=e[0].text,n.tPronunciation=e[0].transliteration.text}catch{}return n}parseLookupResult(t,e){const n=e||new Object;try{n.originalText=t[0].displaySource;const e=t[0].translations;n.mainMeaning=e[0].displayTarget,n.tPronunciation=e[0].transliteration;const r=[];for(const t in e){const n=[];for(const r in e[t].backTranslations)n.push(e[t].backTranslations[r].displayText);r.push({pos:e[t].posTag,meaning:e[t].displayTarget,synonyms:n})}n.detailedMeanings=r}catch{}return n}parseExampleResult(t,e){const n=e||new Object;try{n.examples=t[0].examples.map((t=>({source:`${t.sourcePrefix}<b>${t.sourceTerm}</b>${t.sourceSuffix}`,target:`${t.targetPrefix}<b>${t.targetTerm}</b>${t.targetSuffix}`})))}catch{}return n}async updateTTSAuth(){const t=await this.request((()=>({method:"POST",baseURL:this.HOST,url:`tfetspktok?isVertical=1&&IG=${this.IG}&IID=${this.IID}.${this.count.toString()}`,headers:this.HEADERS,data:`&token=${encodeURIComponent(this.token)}&key=${encodeURIComponent(this.key)}`})),[]);this.TTS_AUTH.region=t.region,this.TTS_AUTH.token=t.token}generateTTSData(t,e,n){const r=this.LAN_TO_CODE.get(e),s=$t[r],a=qt[r],o="fast"===n?"-10.00%":"-30.00%";return`<speak version='1.0' xml:lang='${a}'><voice xml:lang='${a}' xml:gender='${s[1]}' name='${s[2]}'><prosody rate='${o}'>${t}</prosody></voice></speak>`}arrayBufferToBase64(t){let e="",n=new Uint8Array(t);for(let r=0;r<n.byteLength;r++)e+=String.fromCharCode(n[r]);return btoa(e)}constructDetectParams(t){const e=`ttranslatev3?isVertical=1&IG=${this.IG}&IID=${this.IID}.${this.count.toString()}`,n=`&fromLang=auto-detect&to=zh-Hans&text=${encodeURIComponent(t)}&token=${encodeURIComponent(this.token)}&key=${encodeURIComponent(this.key)}`;return{method:"POST",baseURL:this.HOST,url:e,headers:this.HEADERS,data:n}}constructTranslateParams(t,e,n){const r=`ttranslatev3?isVertical=1&IG=${this.IG}&IID=${this.IID}.${this.count.toString()}`,s=`&fromLang=${this.LAN_TO_CODE.get(e)}&to=${this.LAN_TO_CODE.get(n)}&text=${encodeURIComponent(t)}&token=${encodeURIComponent(this.token)}&key=${encodeURIComponent(this.key)}`;return{method:"POST",baseURL:this.HOST,url:r,headers:this.HEADERS,data:s}}constructLookupParams(t,e,n){const r=`tlookupv3?isVertical=1&IG=${this.IG}&IID=${this.IID}.${this.count.toString()}`,s=`&from=${e}&to=${this.LAN_TO_CODE.get(n)}&text=${encodeURIComponent(t)}&token=${encodeURIComponent(this.token)}&key=${encodeURIComponent(this.key)}`;return{method:"POST",baseURL:this.HOST,url:r,headers:this.HEADERS,data:s}}constructExampleParams(t,e,n,r){const s=`texamplev3?isVertical=1&IG=${this.IG}&IID=${this.IID}.${this.count.toString()}`,a=`&from=${t}&to=${this.LAN_TO_CODE.get(e)}&text=${encodeURIComponent(n)}&translation=${encodeURIComponent(r)}&token=${encodeURIComponent(this.token)}&key=${encodeURIComponent(this.key)}`;return{method:"POST",baseURL:this.HOST,url:s,headers:this.HEADERS,data:a}}constructTTSParams(t,e,n){return{method:"POST",baseURL:`https://${this.TTS_AUTH.region}.tts.speech.microsoft.com/cognitiveservices/v1?`,headers:{"Content-Type":"application/ssml+xml",Authorization:`Bearer ${this.TTS_AUTH.token}`,"X-MICROSOFT-OutputFormat":"audio-16khz-32kbitrate-mono-mp3","cache-control":"no-cache"},data:this.generateTTSData(t,e,n),responseType:"arraybuffer"}}async request(t,e,n=!0){let r=0;const s=async()=>{this.count++;const a=await Ht(t.call(this,...e));if(401===a.status||429===a.status)throw{errorType:"API_ERR",errorCode:a.status,errorMsg:"Request too frequently!"};const o=/(https:\/\/.*\.bing\.com\/).*/g.exec(a.request.responseURL);if(o&&o[1]!==this.HOST)return this.HOST=o[1],this.HOME_PAGE=`${this.HOST}translator`,await this.updateTokens().then(s);const i=a.data.StatusCode||a.data.statusCode||200;switch(i){case 200:return a.data;case 205:return await this.updateTokens().then(s)}if(n&&r<this.MAX_RETRY)return r++,await this.updateTokens().then(s);throw{errorType:"API_ERR",errorCode:i,errorMsg:"Request failed."}};return this.tokensInitiated||(await this.updateTokens(),this.tokensInitiated=!0),s()}supportedLanguages(){return new Set(this.LAN_TO_CODE.keys())}async detect(t){try{const e=(await this.request(this.constructDetectParams,[t]))[0].detectedLanguage.language;return this.CODE_TO_LAN.get(e)}catch(e){throw e.errorMsg=e.errorMsg||e.message,e.errorAct={api:"bing",action:"detect",text:t,from:null,to:null},e}}async translate(t,e,n){let r;try{r=await this.request(this.constructTranslateParams,[t,e,n])}catch(a){throw a.errorAct={api:"bing",action:"translate",text:t,from:e,to:n},a}const s=this.parseTranslateResult(r,{originalText:t,mainMeaning:""});try{const e=await this.request(this.constructLookupParams,[t,r[0].detectedLanguage.language,n],!1),a=this.parseLookupResult(e,s),o=await this.request(this.constructExampleParams,[r[0].detectedLanguage.language,n,t,a.mainMeaning],!1);return this.parseExampleResult(o,a)}catch{return s}}async pronounce(t,e,n){this.stopPronounce();let r=0;const s=async()=>{try{const r=await this.request(this.constructTTSParams,[t,e,n],!1);this.AUDIO.src=`data:audio/mp3;base64,${this.arrayBufferToBase64(r)}`,await this.AUDIO.play()}catch(a){if(r<this.MAX_RETRY)return r++,this.updateTTSAuth().then(s);const n={api:"bing",action:"pronounce",text:t,from:e,to:null};throw a.errorType?(a.errorAct=n,a):{errorType:"NET_ERR",errorCode:0,errorMsg:a.message,errorAct:n}}};return this.TTS_AUTH.region.length>0&&this.TTS_AUTH.token.length>0||await this.updateTTSAuth(),s()}stopPronounce(){this.AUDIO.paused||this.AUDIO.pause()}}const Gt=[["auto","auto"],["zh-CN","zh-CN"],["zh-TW","zh-TW"],["en","en"],["af","af"],["am","am"],["ar","ar"],["az","az"],["be","be"],["bg","bg"],["bn","bn"],["bs","bs"],["ca","ca"],["ceb","ceb"],["co","co"],["cs","cs"],["cy","cy"],["da","da"],["de","de"],["el","el"],["eo","eo"],["es","es"],["et","et"],["eu","eu"],["fa","fa"],["fi","fi"],["fr","fr"],["fy","fy"],["ga","ga"],["gd","gd"],["gl","gl"],["gu","gu"],["ha","ha"],["haw","haw"],["he","he"],["hi","hi"],["hmn","hmn"],["hr","hr"],["ht","ht"],["hu","hu"],["hy","hy"],["id","id"],["ig","ig"],["is","is"],["it","it"],["ja","ja"],["jw","jw"],["ka","ka"],["kk","kk"],["km","km"],["kn","kn"],["ko","ko"],["ku","ku"],["ky","ky"],["la","la"],["lb","lb"],["lo","lo"],["lt","lt"],["lv","lv"],["mg","mg"],["mi","mi"],["mk","mk"],["ml","ml"],["mn","mn"],["mr","mr"],["ms","ms"],["mt","mt"],["my","my"],["ne","ne"],["nl","nl"],["no","no"],["ny","ny"],["pl","pl"],["ps","ps"],["pt","pt"],["ro","ro"],["ru","ru"],["sd","sd"],["si","si"],["sk","sk"],["sl","sl"],["sm","sm"],["sn","sn"],["so","so"],["sq","sq"],["sr","sr"],["st","st"],["su","su"],["sv","sv"],["sw","sw"],["ta","ta"],["te","te"],["tg","tg"],["th","th"],["fil","tl"],["tr","tr"],["ug","ug"],["uk","uk"],["ur","ur"],["uz","uz"],["vi","vi"],["xh","xh"],["yi","yi"],["yo","yo"],["zu","zu"]];class Jt{constructor(){n(this,"TKK",[434217,1534559001]),n(this,"HOME_PAGE","https://translate.google.com/"),n(this,"HOST","https://translate.googleapis.com/"),n(this,"TRANSLATE_URL",`${this.HOST}translate_a/single?client=gtx&dj=1&dt=t&dt=at&dt=bd&dt=ex&dt=md&dt=rw&dt=ss&dt=rm`),n(this,"TTS_URL",`${this.HOST}translate_tts?client=gtx`),n(this,"FALLBACK_TRANSLATE_URL",`${this.HOST}translate_a/single?ie=UTF-8&client=webapp&otf=1&ssel=0&tsel=0&kc=5&dt=t&dt=at&dt=bd&dt=ex&dt=md&dt=rw&dt=ss&dt=rm`),n(this,"FALLBACK_TTS_URL",`${this.HOST}translate_tts?ie=UTF-8&client=webapp`),n(this,"fallBacking",!1),n(this,"LAN_TO_CODE",new Map(Gt)),n(this,"CODE_TO_LAN",new Map(Gt.map((([t,e])=>[e,t])))),n(this,"AUDIO",new Audio)}generateTK(t,e,n){e=Number(e)||0;let r=[],s=0,a=0;for(;a<t.length;a++){let e=t.charCodeAt(a);128>e?r[s++]=e:(2048>e?r[s++]=e>>6|192:(55296==(64512&e)&&a+1<t.length&&56320==(64512&t.charCodeAt(a+1))?(e=65536+((1023&e)<<10)+(1023&t.charCodeAt(++a)),r[s++]=e>>18|240,r[s++]=e>>12&63|128):r[s++]=e>>12|224,r[s++]=e>>6&63|128),r[s++]=63&e|128)}for(t=e,s=0;s<r.length;s++)t+=r[s],t=this._magic(t,"+-a^+6");return t=this._magic(t,"+-3^+b+-f"),0>(t^=Number(n)||0)&&(t=2147483648+(2147483647&t)),(t%=1e6).toString()+"."+(t^e)}_magic(t,e){for(var n=0;n<e.length-2;n+=3){var r="a"<=(r=e.charAt(n+2))?r.charCodeAt(0)-87:Number(r);r="+"==e.charAt(n+1)?t>>>r:t<<r;t="+"==e.charAt(n)?t+r&4294967295:t^r}return t}async updateTKK(){let t=(await Ht.get(this.HOME_PAGE)).data,e=(t.match(/TKK=(.*?)\(\)\)'\);/i)||[""])[0].replace(/\\x([0-9A-Fa-f]{2})/g,"").match(/[+-]?\d+/g);e?(this.TKK[0]=Number(e[2]),this.TKK[1]=Number(e[0])+Number(e[1])):(e=t.match(/TKK[=:]['"](\d+?)\.(\d+?)['"]/i),e&&(this.TKK[0]=Number(e[1]),this.TKK[1]=Number(e[2])))}fallBack(){this.fallBacking=!0,setTimeout((()=>{this.fallBacking=!1}),18e5)}generateDetectURL(t){let e="&sl=auto&tl=zh-cn";return e+=`&tk=${this.generateTK(t,this.TKK[0],this.TKK[1])}&q=${encodeURIComponent(t)}`,this.fallBacking?this.FALLBACK_TRANSLATE_URL+e:this.TRANSLATE_URL+e}generateTranslateURL(t,e,n){let r=`&sl=${this.LAN_TO_CODE.get(e)}&tl=${this.LAN_TO_CODE.get(n)}`;return r+=`&tk=${this.generateTK(t,this.TKK[0],this.TKK[1])}&q=${encodeURIComponent(t)}`,this.fallBacking?this.FALLBACK_TRANSLATE_URL+r:this.TRANSLATE_URL+r}parseDetectResult(t){return this.fallBacking?this.CODE_TO_LAN.get(t[2])||"":t.ld_result.extended_srclangs?this.CODE_TO_LAN.get(t.ld_result.extended_srclangs[0])||"":this.CODE_TO_LAN.get(t.ld_result.srclangs[0])||""}parseBetterResult(t){const e={originalText:"",mainMeaning:""};if(t.sentences){e.mainMeaning="",e.originalText="";let n=0;for(;n<t.sentences.length&&t.sentences[n].trans;n++)e.mainMeaning+=t.sentences[n].trans,e.originalText+=t.sentences[n].orig;n<t.sentences.length&&(t.sentences[n].translit&&(e.tPronunciation=t.sentences[n].translit),t.sentences[n].src_translit&&(e.sPronunciation=t.sentences[n].src_translit))}if(t.dict){e.detailedMeanings=[];for(let n of t.dict)for(let t of n.entry)e.detailedMeanings.push({pos:n.pos,meaning:t.word,synonyms:t.reverse_translation})}if(t.definitions){e.definitions=[];for(let n of t.definitions)for(let t of n.entry)e.definitions.push({pos:n.pos,meaning:t.gloss,synonyms:[],example:t.example})}if(t.examples){e.examples=[];for(let n of t.examples.example)e.examples.push({source:n.text,target:null});e.examples.sort(((t,e)=>t.source>e.source?1:t.source===e.source?0:-1))}return e}parseFallbackResult(t){const e={originalText:"",mainMeaning:""};for(let n=0;n<t.length;n++)if(t[n]){const r=t[n];switch(n){case 0:{let t=[],n=[],s=r.length-1;for(let e=0;e<=s;e++)t.push(r[e][0]),n.push(r[e][1]);e.mainMeaning=t.join(""),e.originalText=n.join("");try{s>0&&(r[s][2]&&r[s][2].length>0&&(e.tPronunciation=r[s][2]),r[s][3]&&r[s][3].length>0&&(e.sPronunciation=r[s][3]))}catch{}break}case 1:e.detailedMeanings=new Array,r.forEach((t=>e.detailedMeanings.push({pos:t[0],meaning:t[1].join(", ")})));break;case 12:e.definitions=new Array,r.forEach((t=>{t[1].forEach((n=>{e.definitions.push({pos:t[0],meaning:n[0],example:n[2]})}))}));break;case 13:e.examples=new Array,r.forEach((t=>t.forEach((t=>e.examples.push({source:null,target:t[0]})))))}}return e}parseTranslateResult(t){return this.fallBacking?this.parseFallbackResult(t):this.parseBetterResult(t)}supportedLanguages(){return new Set(this.LAN_TO_CODE.keys())}detect(t){const e=async()=>{const n=await Ht.get(this.generateDetectURL(t),{validateStatus:t=>t<500});if(200===n.status)return this.parseDetectResult(n.data);if(429===n.status&&!this.fallBacking)return this.fallBack(),await this.updateTKK().then(e);throw{errorType:"API_ERR",errorCode:n.status,errorMsg:"Detect failed.",errorAct:{api:"google",action:"detect",text:t,from:null,to:null}}};return e()}translate(t,e,n){const r=async()=>{const s=await Ht.get(this.generateTranslateURL(t,e,n),{validateStatus:t=>t<500});if(200===s.status)return this.parseTranslateResult(s.data);if(429===s.status&&!this.fallBacking)return this.fallBack(),await this.updateTKK().then(r);throw{errorType:"API_ERR",errorCode:s.status,errorMsg:"Translate failed.",errorAct:{api:"google",action:"translate",text:t,from:e,to:n}}};return r()}async pronounce(t,e,n){this.stopPronounce();let r="fast"===n?"0.8":"0.2";this.AUDIO.src=`${this.fallBacking?this.FALLBACK_TTS_URL:this.TTS_URL}&q=${encodeURIComponent(t)}&tl=${this.LAN_TO_CODE.get(e)}&ttsspeed=${r}&tk=${this.generateTK(t,this.TKK[0],this.TKK[1])}`;try{await this.AUDIO.play()}catch(s){throw{errorType:"NET_ERR",errorCode:0,errorMsg:s.message,errorAct:{api:"google",action:"pronounce",text:t,from:e,to:null}}}}stopPronounce(){this.AUDIO.paused||this.AUDIO.pause()}}const Wt=[["ach","ach"],["af","afr"],["aka","aka"],["sq","alb"],["am","amh"],["ar","ara"],["arg","arg"],["hy","arm"],["asm","asm"],["ast","ast"],["auto","auto"],["aym","aym"],["az","aze"],["bal","bal"],["sun","sun"],["bak","bak"],["eu","baq"],["be","bel"],["bem","bem"],["bn","ben"],["ber","ber"],["bho","bho"],["bis","bis"],["bli","bli"],["nob","nob"],["bs","bos"],["bre","bre"],["bg","bul"],["bur","bur"],["yue","yue"],["ca","cat"],["ceb","ceb"],["chr","chr"],["ny","nya"],["chv","chv"],["wyw","wyw"],["cor","cor"],["co","cos"],["cre","cre"],["cri","cri"],["hr","hrv"],["cs","cs"],["da","dan"],["div","div"],["nl","nl"],["en","en"],["eo","epo"],["et","est"],["fao","fao"],["fil","fil"],["fi","fin"],["fr","fra"],["fri","fri"],["ful","ful"],["gla","gla"],["gl","glg"],["ka","geo"],["de","de"],["el","el"],["grn","grn"],["gu","guj"],["ht","ht"],["hak","hak"],["ha","hau"],["haw","haw"],["he","heb"],["hil","hil"],["hi","hi"],["hmn","hmn"],["hu","hu"],["hup","hup"],["is","ice"],["ido","ido"],["ig","ibo"],["id","id"],["ing","ing"],["ina","ina"],["iku","iku"],["ga","gle"],["it","it"],["ja","jp"],["jw","jav"],["kab","kab"],["kal","kal"],["kn","kan"],["kau","kau"],["kas","kas"],["kah","kah"],["kk","kaz"],["km","hkm"],["kin","kin"],["tlh","kli"],["kon","kon"],["kok","kok"],["ko","kor"],["ku","kur"],["ky","kir"],["lo","lao"],["lag","lag"],["la","lat"],["lv","lav"],["lim","lim"],["lin","lin"],["lt","lit"],["loj","loj"],["lug","lug"],["lb","ltz"],["mk","mac"],["mai","mai"],["mg","mg"],["ms","may"],["ml","mal"],["mt","mlt"],["glv","glv"],["mi","mao"],["mr","mar"],["mah","mah"],["mau","mau"],["frm","frm"],["mot","mot"],["nea","nea"],["ne","nep"],["sme","sme"],["ped","ped"],["no","nor"],["nno","nno"],["oci","oci"],["oji","oji"],["eno","eno"],["or","ori"],["orm","orm"],["oss","oss"],["pam","pam"],["pap","pap"],["ps","pus"],["fa","per"],["pl","pl"],["pt","pt"],["pa","pan"],["que","que"],["ro","rom"],["roh","roh"],["ro","ro"],["ru","ru"],["ruy","ruy"],["sm","sm"],["san","san"],["srd","srd"],["sco","sco"],["src","src"],["sr","srp"],["sec","sec"],["sha","sha"],["sn","sna"],["sil","sil"],["sd","snd"],["si","sin"],["sk","sk"],["sl","slo"],["so","som"],["sol","sol"],["nbl","nbl"],["sot","sot"],["es","spa"],["sw","swa"],["sv","swe"],["syr","syr"],["tgl","tgl"],["tg","tgk"],["ta","tam"],["tat","tat"],["te","tel"],["tet","tet"],["th","th"],["tir","tir"],["zh-TW","cht"],["zh-CN","zh"],["tso","tso"],["tr","tr"],["tuk","tuk"],["twi","twi"],["uk","ukr"],["ups","ups"],["ur","urd"],["uz","uzb"],["ven","ven"],["vi","vie"],["wln","wln"],["cy","wel"],["fry","fry"],["wol","wol"],["xh","xho"],["yi","yid"],["yo","yor"],["zaz","zaz"],["zu","zul"]];class Vt{constructor(){n(this,"MAX_RETRY",3),n(this,"HOST","https://fanyi.baidu.com/"),n(this,"token",""),n(this,"gtk",""),n(this,"sign",""),n(this,"languages",{}),n(this,"HEADERS",{accept:"*/*","accept-language":"en,zh;q=0.9,en-GB;q=0.8,en-CA;q=0.7,en-AU;q=0.6,en-ZA;q=0.5,en-NZ;q=0.4,en-IN;q=0.3,zh-CN;q=0.2","content-type":"application/x-www-form-urlencoded; charset=UTF-8"}),n(this,"LAN_TO_CODE",new Map(Wt)),n(this,"CODE_TO_LAN",new Map(Wt.map((([t,e])=>[e,t])))),n(this,"AUDIO",new Audio)}throwError(t,e,n,r,s=null,a=null){throw{errorType:"API_ERR",errorCode:t,errorMsg:e,errorAct:{api:"baidu",action:n,text:r,from:s,to:a}}}async getTokenGtk(){let t=async()=>{const t=await Ht({method:"get",baseURL:this.HOST,timeout:5e3});this.token=t.data.match(/token *: *['"](.*)['"]/)[1],this.gtk=t.data.match(/window.gtk *= *['"](.*)['"]/)[1]};await t(),await t()}parseResult(t){const e={originalText:"",mainMeaning:""};let n=[],r=[];for(let s of t.trans_result.data)n.push(s.src),r.push(s.dst);if(e.originalText=n.join("\n"),e.mainMeaning=r.join("\n"),t.trans_result.phonetic&&(e.tPronunciation=t.trans_result.phonetic.map((t=>" "!==t.trg_str?t.trg_str:t.src_str)).reduce(((t,e)=>`${t} ${e}`))),t.trans_result.jp_pinyin&&(e.tPronunciation=t.trans_result.jp_pinyin[0].dst),t.dict_result){if(t.dict_result.simple_means){e.sPronunciation=t.dict_result.simple_means.symbols[0].ph_en,e.detailedMeanings=[];const n=t=>{const n={};n.pos=t.part,n.meaning=t.means.reduce(((t,e)=>`${t}, ${e}`)),e.detailedMeanings.push(n)};for(let e of t.dict_result.simple_means.symbols[0].parts)if(e.part)n(e);else for(let t of e.means)!t.means||n(t)}if(t.dict_result.edict){e.definitions=[];for(let n of t.dict_result.edict.item)for(let t of n.tr_group){const r={};r.pos=n.pos,r.meaning=t.tr[0],r.example=t.example[0],r.synonyms=t.similar_word,e.definitions.push(r)}}if(t.dict_result.content){e.sPronunciation=t.dict_result.voice[0].en_phonic,e.detailedMeanings||(e.detailedMeanings=[]);for(let n of t.dict_result.content[0].mean){const t={};t.pos=n.pre,t.meaning=Object.keys(n.cont)[0],e.detailedMeanings.push(t)}}}if(t.liju_result.double){e.examples=[];let n=t.liju_result.double;n=JSON.parse(n);for(let t of n){const n={source:"",target:""};n.source=t[0].map((t=>t.length>4?t[0]+t[4]:t[0])).reduce(((t,e)=>t+e)),n.target=t[1].map((t=>t.length>4?t[0]+t[4]:t[0])).reduce(((t,e)=>t+e)),e.examples.push(n)}}return e}supportedLanguages(){return new Set(this.LAN_TO_CODE.keys())}async detect(t){const e=await Ht({url:"langdetect",method:"post",baseURL:this.HOST,headers:this.HEADERS,data:new URLSearchParams({query:t}),timeout:5e3});if("success"===e.data.msg)return this.CODE_TO_LAN.get(e.data.lan)||"";this.throwError(e.data.errno,e.data.msg,"detect",t)}async translate(t,e,n){let r=0;const s=async()=>{let a=e;"auto"===a&&(a=await this.detect(t));let o=this.LAN_TO_CODE.get(n),i=this.LAN_TO_CODE.get(a),l=(await Ht({url:`/v2transapi?from=${i}&to=${o}`,method:"post",baseURL:this.HOST,headers:this.HEADERS,data:new URLSearchParams({from:i,to:o,query:t,transtype:"realtime",simple_means_flag:"3",sign:this.generateSign(t,this.gtk),token:this.token,domain:"common"}),timeout:5e3})).data;return l.errno?r<this.MAX_RETRY?(r++,await this.getTokenGtk(),s()):void this.throwError(l.errno,l.msg,"translate",t,e,n):this.parseResult(l)};return this.token&&this.gtk||await this.getTokenGtk(),s()}async pronounce(t,e,n){this.stopPronounce();let r="fast"===n?"7":"3";this.AUDIO.src=`${this.HOST}gettts?lan=${this.LAN_TO_CODE.get(e)}&text=${encodeURIComponent(t)}&spd=${r}&source=web`;try{await this.AUDIO.play()}catch(s){throw{errorType:"NET_ERR",errorCode:0,errorMsg:s.message,errorAct:{api:"baidu",action:"pronounce",text:t,from:e,to:null}}}}stopPronounce(){this.AUDIO.paused||this.AUDIO.pause()}tokenA(t,e){for(var n=0;n<e.length-2;n+=3){var r=e.charAt(n+2);r=r>="a"?r.charCodeAt(0)-87:Number(r),r="+"===e.charAt(n+1)?t>>>r:t<<r,t="+"===e.charAt(n)?t+r&4294967295:t^r}return t}generateSign(t,e){var n=null,r=t.length;r>30&&(t=""+t.substr(0,10)+t.substr(Math.floor(r/2)-5,10)+t.substring(t.length,t.length-10));for(var s=(null!==n?n:(n=e||"")||"").split("."),a=Number(s[0])||0,o=Number(s[1])||0,i=[],l=0,c=0;c<t.length;c++){var u=t.charCodeAt(c);128>u?i[l++]=u:(2048>u?i[l++]=u>>6|192:(55296==(64512&u)&&c+1<t.length&&56320==(64512&t.charCodeAt(c+1))?(u=65536+((1023&u)<<10)+(1023&t.charCodeAt(++c)),i[l++]=u>>18|240,i[l++]=u>>12&63|128):i[l++]=u>>12|224,i[l++]=u>>6&63|128),i[l++]=63&u|128)}for(var h=a,d=0;d<i.length;d++)h+=i[d],h=this.tokenA(h,"+-a^+6");return h=this.tokenA(h,"+-3^+b+-f"),0>(h^=o)&&(h=2147483648+(2147483647&h)),(h%=1e6).toString()+"."+(h^a)}}const Xt=[["auto","auto"],["bg","bg"],["et","et"],["pl","pl"],["da","da"],["de","de"],["ru","ru"],["fr","fr"],["fi","fi"],["nl","nl"],["zh-CN","zh"],["cs","cs"],["lv","lv"],["lt","lt"],["ro","ro"],["pt","pt"],["ja","ja"],["sv","sv"],["sk","sk"],["sl","sl"],["es","es"],["el","el"],["hu","hu"],["it","it"],["en","en"]];class Yt{constructor(t,e){n(this,"HOME_PAGE","https://www.deepl.com/translator"),n(this,"LAN_TO_CODE",new Map(Xt)),n(this,"CODE_TO_LAN",new Map(Xt.map((([t,e])=>[e,t])))),n(this,"langDetector"),n(this,"TTSEngine"),n(this,"deepLIframe"),this.langDetector=t,this.TTSEngine=e,this.createIframe()}createIframe(){this.deepLIframe=document.createElement("iframe"),document.body.appendChild(this.deepLIframe),this.deepLIframe.src=this.HOME_PAGE}supportedLanguages(){return new Set(this.LAN_TO_CODE.keys())}async detect(t){return await this.langDetector.detect(t)}async translate(t,e,n){try{return{mainMeaning:await new Promise(((r,s)=>{const a=setTimeout((()=>{s({status:408,errorMsg:"Request timeout!"})}),1e4),o=t=>{!t.data.type||"edge_translate_deepl_response"!==t.data.type||(window.removeEventListener("message",o),clearTimeout(a),200===t.data.status?r(t.data.result):s(t.data))};window.addEventListener("message",o),this.deepLIframe.contentWindow.postMessage({type:"edge_translate_deepl_request",url:`${this.HOME_PAGE}#${this.LAN_TO_CODE.get(e)}/${this.LAN_TO_CODE.get(n)}/${encodeURIComponent(t.replaceAll("/","\\/"))}`},this.HOME_PAGE)})),originalText:t}}catch(r){throw 408===r.status&&(document.body.removeChild(this.deepLIframe),this.createIframe()),r.errorCode=r.status||0,r.errorMsg=r.errorMsg||r.message,r.errorAct={api:"deepl",action:"translate",text:t,from:e,to:n},r}}async pronounce(t,e,n){return await this.TTSEngine.pronounce(t,e,n)}stopPronounce(){this.TTSEngine.stopPronounce()}}const Zt=[["auto","auto"],["zh-CN","zh"],["en","en"],["ja","jp"],["ko","kr"],["fr","fr"],["es","es"],["it","it"],["de","de"],["tr","tr"],["ru","ru"],["pt","pt"],["vi","vi"],["id","id"],["th","th"],["ms","ms"],["ar","ar"],["hi","hi"]],Qt="tencent_token_updated",te=`\n    let watcher = document.createElement("script");\n    watcher.textContent = \`\n        let intervalId = setInterval(() => {\n            if (window.qtk && window.qtv && window.qtk.length > 0 && window.qtv.length > 0) {\n                window.postMessage("et_tencent_token_updated", "*");\n                clearInterval(intervalId);\n            }\n        }, 50);\n    \`;\n    document.body.appendChild(watcher);\n\n    window.addEventListener("message", event => {\n        if (event.data === "et_tencent_token_updated") {\n            chrome.runtime.sendMessage(\n                JSON.stringify({\n                    type: "event",\n                    event: "${Qt}"\n                }),\n                () => window.close()\n            );\n        }\n    });\n`;class ee{constructor(t){n(this,"channel"),n(this,"MAX_RETRY",1),n(this,"qtk",""),n(this,"qtv",""),n(this,"BASE_URL","https://fanyi.qq.com"),n(this,"HEADERS",{}),n(this,"LAN_TO_CODE",new Map(Zt)),n(this,"CODE_TO_LAN",new Map(Zt.map((([t,e])=>[e,t])))),n(this,"AUDIO",new Audio),this.channel=t}supportedLanguages(){return new Set(this.LAN_TO_CODE.keys())}async requestHomePage(){const t=await new Promise(((t,e)=>chrome.tabs.create({url:this.BASE_URL,active:!1},(n=>{chrome.runtime.lastError?e(chrome.runtime.lastError.message):t(n.id)}))));await new Promise(((e,n)=>chrome.tabs.executeScript(t,{code:te,runAt:"document_end"},(()=>{chrome.runtime.lastError?(n(chrome.runtime.lastError.message),chrome.tabs.remove(t,(()=>chrome.runtime.lastError))):e()})))),await new Promise((t=>{const e=this.channel.on(Qt,(()=>{e(),t()}))}))}async updateTokens(){return await this.requestHomePage(),new Promise((t=>{chrome.cookies.getAll({url:this.BASE_URL},(e=>{for(let t of e)"qtv"===t.name?this.qtv=t.value:"qtk"===t.name&&(this.qtk=t.value);t()}))}))}parseResult(t,e){const n={originalText:"",mainMeaning:""};for(let s of t.translate.records)n.mainMeaning+=s.targetText,n.originalText+=s.sourceText;let r=new DOMParser;return n.originalText=r.parseFromString(n.originalText,"text/html").documentElement.textContent,n.mainMeaning=r.parseFromString(n.mainMeaning,"text/html").documentElement.textContent,(!n.originalText||n.originalText.length<=0)&&(n.originalText=e),t.suggest&&t.suggest.data&&t.suggest.data.length>0&&(t.suggest.data[0].prx_ph_AmE&&(n.sPronunciation=t.suggest.data[0].prx_ph_AmE),t.suggest.data[0].examples_json&&(n.examples=JSON.parse(t.suggest.data[0].examples_json).basic.map((t=>({source:r.parseFromString(t.sourceText,"text/html").documentElement.textContent,target:r.parseFromString(t.targetText,"text/html").documentElement.textContent}))))),t.dict&&t.dict.abstract&&t.dict.abstract.length>0&&(n.detailedMeanings=t.dict.abstract.map((t=>({pos:t.ps,meaning:r.parseFromString(t.explanation.join(", "),"text/html").documentElement.textContent})))),n}async detect(t){const e=await Ht({method:"POST",baseURL:this.BASE_URL,url:"/api/translate",headers:this.HEADERS,data:new URLSearchParams({source:this.LAN_TO_CODE.get("auto"),target:this.LAN_TO_CODE.get("zh-CN"),sourceText:t})}),n=e.data.translate.source;if(!n||n.length<=0)throw{errorType:"API_ERR",errorCode:e.status,errorMsg:"Detect failed.",errorAct:{api:"tencent",action:"detect",text:t,from:null,to:null}};return this.CODE_TO_LAN.get(n)}async translate(t,e,n){let r=0;const s=async()=>{const a=await Ht({method:"POST",baseURL:this.BASE_URL,url:"/api/translate",headers:this.HEADERS,data:new URLSearchParams({source:this.LAN_TO_CODE.get(e),target:this.LAN_TO_CODE.get(n),sourceText:t,qtv:this.qtv,qtk:this.qtk,sessionUuid:`translate_uuid${(new Date).getTime()}`})});let o=!1;if((a.data.dict||a.data.translate&&a.data.translate.records[0].targetText.length>0&&(t.trim().indexOf(" ")>-1||r>=this.MAX_RETRY))&&(o=!0),o)return this.parseResult(a.data,t);if(r<this.MAX_RETRY)return r++,await this.updateTokens().then(s);throw{errorType:"API_ERR",errorCode:a.status,errorMsg:"Translate failed.",errorAct:{api:"tencent",action:"translate",text:t,from:e,to:n}}};return(0===this.qtk.length||0===this.qtv.length)&&await this.updateTokens(),await s()}pronounce(t,e,n){this.stopPronounce();let r=0;const s=async()=>{try{let n=await new Promise(((t,e)=>{chrome.cookies.get({url:this.BASE_URL,name:"fy_guid"},(n=>{n&&n.value?t(n.value):e("Tencent guid not found!")}))}));this.AUDIO.src=`${this.BASE_URL}/api/tts?platform=PC_Website&lang=${this.LAN_TO_CODE.get(e)}&text=${encodeURIComponent(t)}&guid=${n}`,await this.AUDIO.play()}catch(n){if(r<this.MAX_RETRY)return r++,await this.requestHomePage(),s();throw{errorType:"NET_ERR",errorCode:0,errorMsg:n.message,errorAct:{api:"tencent",action:"pronounce",text:t,from:e,to:null}}}};return s()}stopPronounce(){this.AUDIO.paused||this.AUDIO.pause()}}return t.BaiduTranslator=Vt,t.BingTranslator=Kt,t.DeeplTranslator=Yt,t.GoogleTranslator=Jt,t.HybridTranslator=class{constructor(t,e){n(this,"channel"),n(this,"CONFIG",{selections:{},translators:[]}),n(this,"REAL_TRANSLATORS"),n(this,"MAIN_TRANSLATOR","GoogleTranslate"),this.channel=e,this.REAL_TRANSLATORS={BaiduTranslate:new Vt,BingTranslate:new Kt,GoogleTranslate:new Jt,TencentTranslate:new ee(e),DeepLTranslate:null},this.REAL_TRANSLATORS.DeepLTranslate=new Yt(this.REAL_TRANSLATORS.BingTranslate,this.REAL_TRANSLATORS.BingTranslate),this.useConfig(t)}useConfig(t){t&&t.translators&&t.selections?(this.CONFIG=t,this.MAIN_TRANSLATOR=t.selections.mainMeaning):console.error("Invalid config for HybridTranslator!")}getAvailableTranslatorsFor(t,e){const n=[];let r;for(r in this.REAL_TRANSLATORS){const s=this.REAL_TRANSLATORS[r].supportedLanguages();s.has(t)&&s.has(e)&&n.push(r)}return n.sort()}updateConfigFor(t,e){const n={translators:[],selections:{}},r=new Set,s=this.getAvailableTranslatorsFor(t,e),a=s[0],o=new Set(s);let i;for(i in this.CONFIG.selections){let t,e=this.CONFIG.selections[i];o.has(e)?(n.selections[i]=e,t=e):(n.selections[i]=a,t=a),r.add(t)}return n.translators=Array.from(r),n}async detect(t){return this.REAL_TRANSLATORS[this.MAIN_TRANSLATOR].detect(t)}async translate(t,e,n){let r=[];for(let l of this.CONFIG.translators)r.push(this.REAL_TRANSLATORS[l].translate(t,e,n).then((t=>[l,t])));const s={originalText:"",mainMeaning:""},a=new Map(await Promise.all(r));let o;for(o in this.CONFIG.selections)try{const t=this.CONFIG.selections[o];s[o]=a.get(t)[o]}catch(i){console.log(`${o} ${this.CONFIG.selections[o]}`),console.log(i)}return s}async pronounce(t,e,n){return this.REAL_TRANSLATORS[this.MAIN_TRANSLATOR].pronounce(t,e,n)}async stopPronounce(){this.REAL_TRANSLATORS[this.MAIN_TRANSLATOR].stopPronounce()}},t.LANGUAGES={en:"English","zh-CN":"ChineseSimplified","zh-TW":"ChineseTraditional",fr:"French",es:"Spanish",ru:"Russian",ar:"Arabic",de:"German",ja:"Japanese",pt:"Portuguese",hi:"Hindi",ur:"Urdu",ko:"Korean",ach:"Achinese",af:"Afrikaans",aka:"Akan",sq:"Albanian",am:"Amharic",arg:"Aragonese",hy:"Armenian",asm:"Assamese",ast:"Asturian",aym:"Aymara",az:"Azerbaijani",bal:"Baluchi",sun:"BasaSunda",bak:"Bashkir",eu:"Basque",be:"Belarusian",bem:"Bemba",bn:"Bengali",ber:"Berberlanguages",bho:"Bhojpuri",bis:"Bislama",bli:"Blin",nob:"Bokmal",bs:"Bosnian",bre:"Breton",bg:"Bulgarian",bur:"Burmese",yue:"Cantonese",ca:"Catalan",ceb:"Cebuano",chr:"Cherokee",ny:"Chichewa",chv:"Chuvash",wyw:"ClassicalChinese",cor:"Cornish",co:"Corsican",cre:"Creek",cri:"CrimeanTatar",hr:"Croatian",cs:"Czech",da:"Danish",prs:"Dari",div:"Divehi",nl:"Dutch",eo:"Esperanto",et:"Estonian",fao:"Faroese",fj:"Fiji",fil:"Filipino",fi:"Finnish",fy:"Frisian",fri:"Friulian",ful:"Fulani",gla:"Gaelic",gl:"Galician",ka:"Georgian",el:"Greek",grn:"Guarani",gu:"Gujarati",ht:"HaitianCreole",hak:"HakhaChin",ha:"Hausa",haw:"Hawaiian",he:"Hebrew",hil:"Hiligaynon",hmn:"Hmong",hu:"Hungarian",hup:"Hupa",is:"Icelandic",ido:"Ido",ig:"Igbo",id:"Indonesian",ing:"Ingush",ina:"interlingua",iku:"Inuktitut",ga:"Irish",it:"Italian",jw:"Javanese",kab:"Kabyle",kal:"Kalaallisut",kn:"Kannada",kau:"Kanuri",kas:"Kashmiri",kah:"Kashubian",kk:"Kazakh",km:"Khmer",kin:"Kinyarwanda",tlh:"Klingon",kon:"Kongo",kok:"Konkani",ku:"Kurdish",kmr:"KurdishNorthern",ky:"Kyrgyz",lo:"Lao",lag:"Latgalian",la:"Latin",lv:"Latvian",lim:"Limburgish",lin:"Lingala",lt:"Lithuanian",loj:"Lojban",lug:"Luganda",lb:"Luxembourgish",mk:"Macedonian",mai:"Maithili",mg:"Malagasy",ms:"Malay",ml:"Malayalam",mt:"Maltese",glv:"Manx",mi:"Maori",mr:"Marathi",mah:"Marshallese",mau:"MauritianCreole",frm:"MiddleFrench",mn:"Mongolian",mot:"Montenegrin",my:"Myanmar",nea:"Neapolitan",ne:"Nepali",sme:"NorthernSami",ped:"NorthernSotho",no:"Norwegian",nno:"Nynorsk",oci:"Occitan",oji:"Ojibwa",eno:"OldEnglish",or:"Oriya",orm:"Oromo",oss:"Ossetian",pam:"Pampanga",pap:"Papiamento",ps:"Pashto",fa:"Persian",pl:"Polish",pa:"Punjabi",que:"Quechua",otq:"QueretaroOttomi",ro:"Romanian",roh:"Romansh",rom:"Romany",ruy:"Rusyn",sm:"Samoan",san:"Sanskrit",srd:"Sardinian",sco:"Scots",gd:"ScotsGaelic",src:"SerbCyrillic",sr:"Serbian","sr-Cyrl":"SerbianCyrillic","sr-Latn":"SerbianLatin",sec:"SerboCroatian",st:"Sesotho",sha:"Shan",sn:"Shona",sil:"Silesian",sd:"Sindhi",si:"Sinhala",sk:"Slovak",sl:"Slovenian",so:"Somali",sol:"Songhailanguages",nbl:"SouthernNdebele",sot:"SouthernSotho",su:"Sundanese",sw:"Swahili",sv:"Swedish",syr:"Syriac",tgl:"Tagalog",ty:"Tahiti",tg:"Tajik",ta:"Tamil",tat:"Tatar",te:"Telugu",tet:"Tetum",th:"Thai",tir:"Tigrinya",to:"Tongan",tso:"Tsonga",tr:"Turkish",tuk:"Turkmen",twi:"Twi",ug:"Uyghur",uk:"Ukrainian",ups:"UpperSorbian",uz:"Uzbek",ven:"Venda",vi:"Vietnamese",wln:"Walloon",cy:"Welsh",fry:"WesternFrisian",wol:"Wolof",xh:"Xhosa",yi:"Yiddish",yo:"Yoruba",yua:"YukatanMayan",zaz:"Zaza",zu:"Zulu"},t.TencentTranslator=ee,t.axios=Ht,Object.defineProperties(t,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),t}({});
